# AIRS
AIRS框架说明及实验数据

## AIRS框架设计背景
AIRS框架用于进行需求获取。目前发现通过已有的框架及方法在大模型进行需求获取，与目标需求相差甚远，且存在获取到的需求不完整，正确率较低等问题。

因此，根据目前已有的框架及方法，以及局限性，提出了AIRS框架，进行动态迭代，已达到自我检验等来获取需求。


## AIRS具体内容
AIRS框架是一种专为复杂需求获取设计的动态迭代方法，它将需求获取过程结构化为四个核心阶段，通过人机协同的闭环反馈机制，确保需求方案的持续优化与深化。

锚定（Anchor）：本阶段旨在为整个需求获取过程确立不可动摇的基准。通过明确指定大语言模型在何种背景下所扮演的角色、待解决的核心意图、必须遵守的绝对约束以及可衡量的成功信号，构建一个稳定、一致的上下文基础。该基准作为“回归锚点”，确保后续所有推演与检验活动始终围绕既定目标进行，有效防止在动态迭代过程中出现认知偏差或范围蔓延。

推演（Infer）：本阶段是基于“锚定”基准的结构化创造性活动。其任务是从功能行为、用户场景、系统边界等核心维度，对需求进行系统性的分解与扩展，旨在识别并补全实现核心意图所必需的显性及隐性需求。该过程采用模块化策略，允许根据问题特性聚焦关键维度进行深度探索，其产出是一份结构化的、追求广度与深度的初步需求方案集合。

检验（Review）：本阶段是对“推演”产出的需求方案进行系统性评估与加固的关键步骤。它通过清晰度、完整性及需求类型覆盖度等多维评估视角，对方案实施主动的审视与压力测试，旨在识别其中存在的模糊、遗漏或维度偏差等问题。与传统流程末端的被动审查不同，此阶段是迭代早期进行的主动质量过滤，其产出是针对上述视角的、明确的问题清单与优化方向，为决策提供直接依据。

推进（Step Forward）作为框架动态迭代的决策枢纽，依据“检验”阶段所识别的问题，由分析者执行关键操作：若选择优化，则针对检验发现的具体缺陷进行修正，包括将模糊诉求转化为明确、无歧义的陈述，或快速发现并补充遗漏的视角与需求；优化后可重新进入检验或转向交付。若确认方案已稳健，则终止迭代并输出最终需求，从而将线性流程转化为一个闭环自适应的反馈系统。

![AIRS框架流程图](photo/AIRS图.png)


## AIRS使用示例
为更直观地说明AIRS框架的实际运作方式，本节以“学校选课管理系统”的需求获取为案例，演示如何通过多轮迭代逐步从零获得一份完整、清晰且可验证的需求描述清单。该示例基于真实的实验过程（见4.3节实验结果），但为简明起见，此处仅呈现关键步骤与典型输出。

### 锚定阶段
首先，分析者向大语言模型明确角色、背景与任务：
角色：资深需求工程师
背景：某综合性大学计划开发新的“学校选课管理系统”，项目处于最早期阶段。
任务：在后续推演阶段，模拟与关键干系人（学生、教师、教务处管理员）的引导式访谈，发掘并记录他们的原始问题、操作流程、痛点及期望，并分类输出需求描述清单。
模型确认理解后，即可进入推演阶段。

### 推演阶段（第一轮）
模型模拟访谈三类干系人，输出原始反馈（节选）：
本科生：“选课系统在早上9点开放时经常卡死，等能进去时热门课已满。希望有排队提示。”“手动排课表很痛苦，希望系统自动检测冲突并可视化。”
任课教师：“录入成绩要复制粘贴，容易串行。希望支持批量导入。”“课程满员后无法了解候补需求，希望有等待列表。”
教务管理员：“学分认定靠人工核对，效率低。希望内置课程替代规则引擎。”“排课冲突全靠眼力，希望智能辅助。”
此轮输出以功能需求为主，表述具体但尚未系统化。

### 检验阶段（第一轮）
从三个视角对上述反馈进行审查：
清晰度：部分表述如“智能排课”中的“智能”过于宽泛，需细化；教师“实时名单”中的“实时”需明确含义。
完整性：遗漏关键角色（系统运维人员、院系教学秘书、财务处等）和场景（退补选规则、跨专业选课、系统集成等）。
需求类型覆盖度：功能需求丰富，但非功能需求（如性能、安全）、约束性需求（如法规、集成要求）和质量属性需求几乎空白。
结论：暂不能交付，需优化。

### 推进与优化（第一轮）
根据检验结果，分析者决定优化，要求模型：
澄清模糊项（如将“智能排课”转化为具体规则：无教师时间冲突、无教室重叠等）。
补充遗漏角色和场景（模拟访谈运维、教学秘书、财务处等）。
模型执行后，输出更新后的清单，新增了运维人员的监控需求、教学秘书的课程管理需求、财务的缴费联动需求等，并将模糊项具体化。

### 检验与优化迭代（第二轮）
再次检验发现：
新增角色仍不完整（如辅导员、图书馆管理员、数据管理员等缺失）。
部分业务规则仍不闭环（如退课释放名额的时机、补选优先级、课程停开处理流程）。
非功能需求仍缺乏量化指标（如并发数、响应时间、可用性等），约束性需求未系统化。
于是进行第二轮优化，补充辅导员视图、图书馆资源同步、数据报表、换课原子操作、多级审批链等，并与技术专家共同明确非功能指标（如支持15,000并发、核心交易响应<2秒等）和约束条件（如等保二级、MySQL 8.0等）。

### 最终检验与交付
经过多轮迭代，最终清单覆盖了学生、教师、教务、运维、教学秘书、财务、辅导员、图书馆、数据管理员等所有核心干系人，功能需求详尽，非功能需求量化，约束性需求完整，质量属性清晰。检验表明无模糊项、无重大遗漏，四类需求均充分体现，遂进入交付阶段，输出《学校选课管理系统需求描述清单》（部分示例如下）：
【功能需求】：系统应在选课高峰期提供实时排队提示，显示当前位置与预计等待时间。
【功能需求】：系统应支持“换课”原子操作，在确认无冲突且有名额的前提下，2秒内同步完成退选与遴选。
【非功能需求】：选课开放高峰期支持15,000用户并发，95%的核心交易响应时间低于2秒。
【约束性需求】：系统必须通过等保二级测评，学生敏感信息加密存储。
【质量需求】：当学业政策调整时，核心规则修改工作量应在2人/月内完成。


## 论文实验说明
为检验AIRS框架在不同能力模型上的适应性，本实验选取了在代码推理方面表现卓越的DeepSeek与在中文指令遵循方面突出的Qwen3-Max作为基础大语言模型平台。实验任务聚焦于经典的“学校选课管理系统”需求获取。所有方法的提示词均严格遵循其各自原始文献中定义的标准范式进行构造。对于本文提出的AIRS框架，我们为其四个核心阶段（锚定、推演、检验、推进）设计了结构化的提示模板，各阶段的提示词均直接以该阶段的指令与格式要求开始。对于Chain-of-Thought、Self-Ask、ReAct、CRISPE以及ROSES等方法和框架，我们依据其公认范式，编写了以相应任务指令（如“请使用思维链方法，一步步思考并输出需求”）为起点的提示词。所有方法均旨在从零开始，引导模型对“学校选课管理系统”进行需求获取，其中实验共包含三个对比实验，分别是：框架对比实验、横向对比实验、纵向对比实验（消融实验）。目标是通过与大模型的交互，获取高质量的需求。

为确保评估的客观性与实践相关性，我们构建了一份黄金标准需求集。该需求集的构建综合了两个维度的来源：一是结合软件工程经典理论，设计针对性的问题引导大语言模型进行需求生成；二是系统爬取并分析了Gitee等开源平台上多个相关项目的议题（Issue）、拉取请求（Pull Request）及项目文档中的真实需求描述。通过对这些来源的系统化梳理与去重，我们最终归纳出一套明确、结构化的需求描述集合，涵盖了系统须实现的功能需求、非功能需求、约束性需求以及质量需求。在此基础上，结合传统需求工程评估方法以及需求工程数据集LLM-Generated Software Requirements，我们确定了四个合适的评估指标：明确性、一致性、可验证性以及完全性。所有评估指标的计算均通过自动化脚本实现。其中，一致性和完全性依赖于生成需求与黄金需求之间的语义相似度计算：我们使用Sentence-BERT框架加载面向中文的BGE模型对需求文本进行向量化，并通过余弦相似度获得匹配分数；当相似度≥0.7时视为匹配需求，进而计算完全性（匹配需求数/黄金需求总数）和一致性（所有匹配需求相似度的平均值）。 明确性和可验证性则基于规则实现：明确性通过jieba分词后匹配模糊词词典计算模糊词比例得到，可验证性通过正则表达式匹配可验证特征（如数字单位、比较符等）并映射为分数。评估系统首先从JSON格式的黄金需求集中提取205条需求作为基准，然后对各方法生成的需求进行解析和向量化，最后批量计算四个指标得分。

（详细实验结果请看experiment文件夹下内容）